<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ghost Echo - Pro Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Creepster&display=swap" rel="stylesheet">
    <style>
        :root {
            --ghost-color: #00d2ff;
            --danger: #ff416c;
            --bg-dark: #0f0c29;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background: var(--bg-dark);
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            color: white;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
        }

        .container {
            width: 90%;
            max-width: 450px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.07);
            backdrop-filter: blur(15px);
            border-radius: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 25px 50px rgba(0,0,0,0.5);
            text-align: center;
        }

        h1 {
            font-family: 'Creepster', cursive;
            font-size: 3rem;
            color: var(--ghost-color);
            margin: 0 0 20px 0;
            text-shadow: 0 0 20px rgba(0, 210, 255, 0.5);
        }

        p { line-height: 1.6; color: #ccc; }

        .rules-card {
            text-align: left;
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 15px;
            font-size: 0.9rem;
            margin-bottom: 20px;
        }

        .input-group { margin: 20px 0; }

        input[type="text"] {
            width: 80%;
            padding: 12px;
            border-radius: 10px;
            border: 2px solid var(--ghost-color);
            background: transparent;
            color: white;
            font-size: 1rem;
            text-align: center;
        }

        .btn {
            background: var(--ghost-color);
            color: var(--bg-dark);
            border: none;
            padding: 15px 35px;
            border-radius: 50px;
            font-weight: bold;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            text-transform: uppercase;
        }

        .btn:hover { transform: scale(1.05); box-shadow: 0 0 20px var(--ghost-color); }

        .word-reveal {
            font-size: 2.2rem;
            font-weight: 800;
            color: #fff;
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            border: 2px dashed var(--ghost-color);
        }

        .timer-display {
            font-size: 4rem;
            font-weight: 800;
            margin: 20px 0;
        }

        .hidden { display: none; }
        .critical { color: var(--danger); animation: pulse 0.5s infinite; }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>

<div class="container" id="game-container">
    <h1>Ghost Echo</h1>

    <div id="step-rules">
        <div class="rules-card">
            <strong>ðŸ“œ Comment jouer :</strong><br>
            1. Le <strong>FantÃ´me</strong> reÃ§oit un mot secret.<br>
            2. Il doit faire deviner ce mot UNIQUEMENT par des sons (bruitages, sifflements).<br>
            3. ðŸš« Interdit de parler ou de faire des gestes !<br>
            4. Les MÃ©diums ont 45 secondes pour trouver.
        </div>
        <button class="btn" onclick="goToStep(2)">J'ai compris</button>
    </div>

    <div id="step-setup" class="hidden">
        <p>Qui est le FantÃ´me pour ce tour ?</p>
        <div class="input-group">
            <input type="text" id="ghost-name" placeholder="Nom du joueur..." autocomplete="off">
        </div>
        <button class="btn" onclick="initGame()">Confirmer</button>
    </div>

    <div id="step-reveal" class="hidden">
        <p><span id="display-ghost-name"></span>, voici ton mot secret :</p>
        <div class="word-reveal" id="secret-word">MOT</div>
        <p style="font-size: 0.8rem;">(Cache l'Ã©cran aux autres joueurs !)</p>
        <button class="btn" onclick="startHantise()">Lancer le chrono</button>
    </div>

    <div id="step-play" class="hidden">
        <p><strong id="active-ghost"></strong> hante la piÃ¨ce !</p>
        <div id="timer" class="timer-display">45</div>
        <p>MÃ©diums, devinez vite !</p>
        <button class="btn" style="background:white" onclick="endGame(true)">TROUVÃ‰ !</button>
    </div>

    <div id="step-result" class="hidden">
        <h2 id="result-title">Fin de hantise</h2>
        <p id="result-text"></p>
        <button class="btn" onclick="location.reload()">Tour suivant</button>
    </div>
</div>

<script>
    const mots = ["Pop-Corn", "HÃ©licoptÃ¨re", "Abeille", "Ventilateur", "Orage", "Train", "Ciseaux", "Brosse Ã  dents", "Feu de camp", "TronÃ§onneuse", "Galop de cheval", "Mixeur", "Machine Ã  laver", "Appareil Photo"];
    let ghostName = "";
    let timeLeft = 45;
    let timerInterval;

    function goToStep(num) {
        document.querySelectorAll('.container > div').forEach(div => div.classList.add('hidden'));
        document.getElementById('step-' + (num === 1 ? 'rules' : num === 2 ? 'setup' : num === 3 ? 'reveal' : num === 4 ? 'play' : 'result')).classList.remove('hidden');
    }

    function initGame() {
        ghostName = document.getElementById('ghost-name').value || "Le FantÃ´me";
        const motChoisi = mots[Math.floor(Math.random() * mots.length)];
        
        document.getElementById('display-ghost-name').innerText = ghostName;
        document.getElementById('active-ghost').innerText = ghostName;
        document.getElementById('secret-word').innerText = motChoisi.toUpperCase();
        
        goToStep(3);
    }

    function startHantise() {
        goToStep(4);
        timerInterval = setInterval(() => {
            timeLeft--;
            const timerEl = document.getElementById('timer');
            timerEl.innerText = timeLeft;

            if(timeLeft <= 10) timerEl.classList.add('critical');
            if(timeLeft <= 0) endGame(false);
        }, 1000);
    }

    function endGame(win) {
        clearInterval(timerInterval);
        const mot = document.getElementById('secret-word').innerText;
        document.getElementById('result-title').innerText = win ? "ðŸŽ‰ VICTOIRE !" : "ðŸ‘» Ã‰CHEC !";
        document.getElementById('result-text').innerText = win 
            ? `Les MÃ©diums ont libÃ©rÃ© l'esprit de ${ghostName} !` 
            : `L'esprit de ${ghostName} reste prisonnier du mot : ${mot}`;
        
        goToStep(5);
    }
</script>
</body>
</html>
